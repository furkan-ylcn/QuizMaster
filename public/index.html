<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz Platform</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-brain"></i>
                QuizMaster
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="#" class="nav-link" onclick="showSection('dashboard')">Dashboard</a>
                <a href="#" class="nav-link" onclick="showSection('available-quizzes')" id="available-quizzes-link" style="display: none;">Available Quizzes</a>
                <a href="#" class="nav-link" onclick="showSection('create-quiz')" id="create-quiz-link" style="display: none;">Create Quiz</a>
                <a href="#" class="nav-link" onclick="showSection('live-sessions')" id="live-sessions-link" style="display: none;">Live Sessions</a>
                <a href="#" class="nav-link" onclick="logout()" id="logout-link" style="display: none;">Logout</a>
            </div>
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Login Section -->
    <section id="login-section" class="section active">
        <div class="container">
            <div class="login-container">
                <div class="login-form">
                    <h2><i class="fas fa-user-circle"></i> Login</h2>
                    <form id="login-form">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </form>
                    <div class="register-link">
                        <p>Don't have an account? <a href="#" onclick="showRegister()">Register here</a></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Register Section -->
    <section id="register-section" class="section">
        <div class="container">
            <div class="login-container">
                <div class="login-form">
                    <h2><i class="fas fa-user-plus"></i> Register</h2>
                    <form id="register-form">
                        <div class="form-group">
                            <label for="reg-username">Username</label>
                            <input type="text" id="reg-username" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="reg-email">Email</label>
                            <input type="email" id="reg-email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="reg-password">Password</label>
                            <input type="password" id="reg-password" name="password" required>
                        </div>
                        <div class="form-group">
                            <label for="reg-role">Role</label>
                            <select id="reg-role" name="role" required>
                                <option value="player">Player</option>
                                <option value="instructor">Instructor</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-user-plus"></i> Register
                        </button>
                    </form>
                    <div class="register-link">
                        <p>Already have an account? <a href="#" onclick="showLogin()">Login here</a></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard-section" class="section">
        <div class="container">
            <div class="dashboard">
                <h1>Welcome to QuizMaster</h1>
                <div class="user-info">
                    <p>Welcome, <span id="user-name"></span>!</p>
                    <p>Role: <span id="user-role"></span></p>
                </div>
                
                <!-- Instructor Dashboard -->
                <div id="instructor-dashboard" style="display: none;">
                    <div class="dashboard-cards">
                        <div class="card" onclick="showSection('create-quiz')">
                            <i class="fas fa-plus-circle"></i>
                            <h3>Create Quiz</h3>
                            <p>Create new quizzes with custom questions</p>
                        </div>
                        <div class="card" onclick="showSection('my-quizzes')">
                            <i class="fas fa-list"></i>
                            <h3>My Quizzes</h3>
                            <p>Manage your created quizzes</p>
                        </div>
                        <div class="card" onclick="showSection('live-sessions')">
                            <i class="fas fa-broadcast-tower"></i>
                            <h3>Live Sessions</h3>
                            <p>Start and manage live quiz sessions</p>
                        </div>
                    </div>
                </div>

                <!-- Player Dashboard -->
                <div id="player-dashboard" style="display: none;">
                    <div class="dashboard-cards">
                        <div class="card" onclick="showSection('available-quizzes')">
                            <i class="fas fa-play-circle"></i>
                            <h3>Take Quiz</h3>
                            <p>Browse and take available quizzes</p>
                        </div>
                        <div class="card" onclick="showSection('join-live')">
                            <i class="fas fa-users"></i>
                            <h3>Join Live Session</h3>
                            <p>Join live quiz sessions</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Available Quizzes Section -->
    <section id="available-quizzes-section" class="section">
        <div class="container">
            <h2><i class="fas fa-list"></i> Available Quizzes</h2>
            <div id="quizzes-list" class="quizzes-grid">
                <!-- Quizzes will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Create Quiz Section -->
    <section id="create-quiz-section" class="section">
        <div class="container">
            <h2><i class="fas fa-plus-circle"></i> Create New Quiz</h2>
            <form id="create-quiz-form" class="quiz-form">
                <div class="form-group">
                    <label for="quiz-title">Quiz Title</label>
                    <input type="text" id="quiz-title" name="title" required>
                </div>
                <div class="form-group">
                    <label for="quiz-type">Quiz Type</label>
                    <select id="quiz-type" name="isLiveOnly">
                        <option value="false">Available Anytime</option>
                        <option value="true">Live Sessions Only</option>
                    </select>
                </div>
                
                <div class="questions-container">
                    <h3>Questions</h3>
                    <div id="questions-list">
                        <!-- Questions will be added here -->
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addQuestion()">
                        <i class="fas fa-plus"></i> Add Question
                    </button>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Create Quiz
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="showSection('dashboard')">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </section>

    <!-- Quiz Taking Section -->
    <section id="quiz-taking-section" class="section">
        <div class="container">
            <div class="quiz-header">
                <h2 id="quiz-title-display"></h2>
                <div class="quiz-progress">
                    <span id="question-counter">Question 1 of 5</span>
                    <div class="timer" id="timer">
                        <i class="fas fa-clock"></i>
                        <span id="time-remaining">30</span>s
                    </div>
                </div>
            </div>
            
            <div class="question-container">
                <div class="question">
                    <h3 id="question-text"></h3>
                    <div class="options" id="question-options">
                        <!-- Options will be loaded here -->
                    </div>
                </div>
            </div>
            
            <div class="quiz-actions">
                <button id="submit-answer" class="btn btn-primary" onclick="submitAnswer()" disabled>
                    <i class="fas fa-check"></i> Submit Answer
                </button>
            </div>
        </div>
    </section>

    <!-- Live Sessions Section -->
    <section id="live-sessions-section" class="section">
        <div class="container">
            <h2><i class="fas fa-broadcast-tower"></i> Live Sessions</h2>
            
            <!-- Instructor Live Session Controls -->
            <div id="instructor-live-controls" style="display: none;">
                <div class="live-session-form">
                    <h3>Start New Live Session</h3>
                    <form id="start-live-session-form">
                        <div class="form-group">
                            <label for="live-quiz-select">Select Quiz</label>
                            <select id="live-quiz-select" name="quizId" required>
                                <option value="">Choose a quiz...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="session-id">Session ID (optional)</label>
                            <input type="text" id="session-id" name="sessionId" placeholder="Leave empty for auto-generated">
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-play"></i> Start Live Session
                        </button>
                    </form>
                </div>
                
                <div id="active-session" style="display: none;">
                    <h3>Active Session</h3>
                    <div class="session-info">
                        <p><strong>Session ID:</strong> <span id="active-session-id"></span></p>
                        <p><strong>Quiz:</strong> <span id="active-quiz-title"></span></p>
                        <p><strong>Current Question:</strong> <span id="current-question-num">1</span></p>
                        <p><strong>Participants:</strong> <span id="participants-count">0</span></p>
                    </div>
                    <div class="session-controls">
                        <button class="btn btn-success" onclick="startCurrentQuestion()">
                            <i class="fas fa-play"></i> Start Current Question
                        </button>
                        <button class="btn btn-primary" onclick="nextQuestion()">
                            <i class="fas fa-forward"></i> Next Question
                        </button>
                        <button class="btn btn-danger" onclick="endSession()">
                            <i class="fas fa-stop"></i> End Session
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Player Live Session Join -->
            <div id="player-live-controls" style="display: none;">
                <div class="join-session-form">
                    <h3>Join Live Session</h3>
                    <form id="join-session-form">
                        <div class="form-group">
                            <label for="join-session-id">Session ID</label>
                            <input type="text" id="join-session-id" required>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Join Session
                        </button>
                    </form>
                </div>
                
                <div id="available-sessions">
                    <h3>Available Live Sessions</h3>
                    <div id="live-sessions-list">
                        <!-- Available sessions will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Live Session Player Section -->
    <section id="live-session-player-section" class="section">
        <div class="container">
            <div class="live-session-header">
                <h2><i class="fas fa-broadcast-tower"></i> Live Session</h2>
                <div class="session-info-bar">
                    <div class="session-detail">
                        <span class="label">Session ID:</span>
                        <span id="player-session-id" class="value">-</span>
                    </div>
                    <div class="session-detail">
                        <span class="label">Quiz:</span>
                        <span id="player-quiz-title" class="value">-</span>
                    </div>
                    <div class="session-detail">
                        <span class="label">Question:</span>
                        <span id="player-current-question" class="value">1</span>
                    </div>
                </div>
            </div>
            
            <div class="live-session-content">
                <div class="waiting-area" id="waiting-for-question">
                    <div class="waiting-message">
                        <i class="fas fa-clock fa-3x"></i>
                        <h3>Waiting for next question...</h3>
                        <p>The instructor will start the next question shortly.</p>
                    </div>
                </div>
                
                <div class="live-question-area" id="live-question-display" style="display: none;">
                    <!-- Live question will be displayed here -->
                </div>
            </div>
            
            <div class="live-session-actions">
                <button class="btn btn-danger" onclick="leaveLiveSession()">
                    <i class="fas fa-sign-out-alt"></i> Leave Session
                </button>
            </div>
        </div>
    </section>

    <!-- Join Live Section -->
    <section id="join-live-section" class="section">
        <div class="container">
            <h2><i class="fas fa-users"></i> Join Live Session</h2>
            <div class="join-session-form">
                <form id="join-live-form">
                    <div class="form-group">
                        <label for="live-session-id">Session ID</label>
                        <input type="text" id="live-session-id" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Join Session
                    </button>
                </form>
            </div>
            
            <div id="available-live-sessions">
                <h3>Available Live Sessions</h3>
                <div id="live-sessions-grid">
                    <!-- Available sessions will be loaded here -->
                </div>
            </div>
        </div>
    </section>

    <!-- My Quizzes Section -->
    <section id="my-quizzes-section" class="section">
        <div class="container">
            <h2><i class="fas fa-list"></i> My Quizzes</h2>
            <div id="my-quizzes-list" class="quizzes-grid">
                <!-- User's quizzes will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <section id="results-section" class="section">
        <div class="container">
            <div class="results-container">
                <h2><i class="fas fa-trophy"></i> Quiz Results</h2>
                <div class="score-display">
                    <div class="score-circle">
                        <span id="final-score">0</span>
                        <span class="score-total">/ <span id="total-questions">0</span></span>
                    </div>
                    <p class="score-percentage" id="score-percentage">0%</p>
                </div>
                <div class="results-actions">
                    <button class="btn btn-primary" onclick="showSection('available-quizzes')">
                        <i class="fas fa-redo"></i> Take Another Quiz
                    </button>
                    <button class="btn btn-secondary" onclick="showSection('dashboard')">
                        <i class="fas fa-home"></i> Back to Dashboard
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Session Results Section (for players) -->
    <div id="session-results-section" class="section">
        <div class="container">
            <div class="results-header">
                <h2>🎉 Session Results</h2>
                <div class="session-info">
                    <p><strong>Session ID:</strong> <span id="results-session-id"></span></p>
                    <p><strong>Quiz:</strong> <span id="results-quiz-title"></span></p>
                </div>
            </div>
            
            <div class="user-performance">
                <h3>Your Performance</h3>
                <div class="score-display">
                    <div class="score-item">
                        <span class="score-value" id="user-final-score">0</span>
                        <span class="score-label">Correct</span>
                    </div>
                    <div class="score-item">
                        <span class="score-value" id="user-total-questions">0</span>
                        <span class="score-label">Total</span>
                    </div>
                    <div class="score-item">
                        <span class="score-value" id="user-percentage">0%</span>
                        <span class="score-label">Score</span>
                    </div>
                </div>
            </div>
            
            <div class="results-tabs">
                <button class="tab-button active" onclick="showResultsTab('answers')">Your Answers</button>
                <button class="tab-button" onclick="showResultsTab('leaderboard')">Leaderboard</button>
            </div>
            
            <div id="answers-tab" class="tab-content active">
                <h3>Detailed Review</h3>
                <div id="detailed-answers"></div>
            </div>
            
            <div id="leaderboard-tab" class="tab-content">
                <h3>Final Leaderboard</h3>
                <div id="session-leaderboard"></div>
            </div>
            
            <div class="results-actions">
                <button class="btn btn-primary" onclick="showSection('dashboard')">
                    <i class="fas fa-home"></i> Back to Dashboard
                </button>
            </div>
        </div>
    </div>

    <!-- Instructor Results Section -->
    <div id="instructor-results-section" class="section">
        <div class="container">
            <div class="results-header">
                <h2>📊 Session Complete</h2>
                <div class="session-info">
                    <p><strong>Session ID:</strong> <span id="instructor-session-id"></span></p>
                </div>
            </div>
            
            <div class="instructor-leaderboard-container">
                <h3>Final Leaderboard</h3>
                <div id="instructor-leaderboard"></div>
            </div>
            
            <div class="results-actions">
                <button class="btn btn-primary" onclick="showSection('dashboard')">
                    <i class="fas fa-home"></i> Back to Dashboard
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="script.js"></script>
</body>
</html>